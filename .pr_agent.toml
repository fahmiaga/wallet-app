[config]
disable_auto_feedback = false
enable_custom_labels = true

[pull_request]
review = true                   
review_comment_lgtm = true
inline_code_comments = true      
summarize = true                 
on_push_update = false           

[pull_request_commands]
enabled = true
review = true

[rules.ruby]
security = true
bugs = true
style = false                    
performance = true

[rules.javascript]
eslint = true

[custom_labels."needs-staging-test"]
description = """
pr_agent: Apply this label when the PR is risky and must be tested on staging first.
Use this label if:
- PR introduces rake tasks
- PR performs data migration or bulk inserts/updates
- PR mutates production data
- PR lacks idempotency checks
- PR affects background jobs or schedulers
- REVIEW_EFFORT is LOW
"""

[pr_reviewer]
extra_instructions = """
Before reviewing the PR:
1. Read and follow the repository documentation:
   - docs/best_practices.md
2. Treat these documents as the source of truth.
3. When reviewing, reference violations of these best practices explicitly.
4. Leave inline comments when best practices are violated.

Estimate REVIEW_EFFORT: LOW, MEDIUM, or HIGH.

Classify as HIGH if:
- PR introduces rake tasks
- PR mutates production data
- PR creates or updates records in bulk
- PR lacks idempotency checks
- PR impacts background jobs or schedulers

If REVIEW_EFFORT is HIGH:
- Explicitly output: REVIEW_EFFORT: HIGH
- Explicitly output: STAGING_TEST_REQUIRED
"""
